{"version":3,"sources":["../../../src/server/configs/strategies.js"],"names":["jwtStrategy","opts","secretOrKey","process","env","JWT_SECRET","jwtFromRequest","ExtractJwt","fromAuthHeaderAsBearerToken","passport","use","JWTStrategy","payload","done","User","findById","id","then","user","catch","err","console","log"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AAEA,MAAMA,WAAW,GAAG,MAAM;AACtB,QAAMC,IAAI,GAAG;AACTC,IAAAA,WAAW,EAAEC,OAAO,CAACC,GAAR,CAAYC,UAAZ,IAA0B,QAD9B;AAETC,IAAAA,cAAc,EAAEC,wBAAWC,2BAAX;AAFP,GAAb;;AAKAC,oBAASC,GAAT,CACI,IAAIC,qBAAJ,CAAgBV,IAAhB,EAAsB,CAACW,OAAD,EAAUC,IAAV,KAAmB;AACrCC,kBAAKC,QAAL,CAAcH,OAAO,CAACI,EAAtB,EACKC,IADL,CACUC,IAAI,IAAI;AACV,UAAIA,IAAJ,EAAU;AACN,eAAOL,IAAI,CAAC,IAAD,EAAOK,IAAP,CAAX;AACH;;AACD,aAAOL,IAAI,CAAC,IAAD,EAAO,KAAP,CAAX;AACH,KANL,EAOKM,KAPL,CAOWC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAPlB;AAQH,GATD,CADJ;AAYH,CAlBD;;eAoBepB,W","sourcesContent":["import passport from \"passport\";\nimport {Strategy as JWTStrategy, ExtractJwt} from \"passport-jwt\";\nimport User from \"../models/User\";\n\nconst jwtStrategy = () => {\n    const opts = {\n        secretOrKey: process.env.JWT_SECRET || \"secret\",\n        jwtFromRequest: ExtractJwt.fromAuthHeaderAsBearerToken(),\n    };\n\n    passport.use(\n        new JWTStrategy(opts, (payload, done) => {\n            User.findById(payload.id)\n                .then(user => {\n                    if (user) {\n                        return done(null, user);\n                    }\n                    return done(null, false);\n                })\n                .catch(err => console.log(err));\n        }),\n    );\n};\n\nexport default jwtStrategy;\n"],"file":"strategies.js"}